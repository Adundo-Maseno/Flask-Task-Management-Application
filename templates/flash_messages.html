<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
  <script src="https://kit.fontawesome.com/a076d05399.js"></script>
  <style>
    /* Styling for the card */
    .card {
      max-width: 20rem; /* Set maximum width */
      padding: 1.5rem; /* Add padding */
      border-radius: 0.5rem; /* Add border radius */
      box-shadow: 0 0.25rem 0.5rem rgba(0, 0, 0, 0.1); /* Add shadow */
      position: fixed; /* Set position to fixed */
      top: 2rem; /* Set distance from top */
      left: 50%; /* Align horizontally */
      transform: translateX(-50%); /* Center horizontally */
      cursor: default; /* Set cursor to default */
    }

    /* Styling for error message */
    .error {
      background-color: #fef2f2; /* Set background color for error message */
      border: 1px solid #f43f5e; /* Set border color for error message */
    }

    /* Styling for success message */
    .success {
      background-color: #f0fdf6; /* Set background color for success message */
      border: 1px solid #22c55e; /* Set border color for success message */
    }

    /* Styling for the close button */
    .close-btn {
      cursor: pointer; /* Add pointer cursor */
      color: #4b5563; /* Set close button color */
      transition: color 0.3s; /* Add transition effect */
    }

    /* Hover effect for close button */
    .close-btn:hover {
      color: #1e40af; /* Set close button hover color */
    }
  </style>
</head>
<body>
  <!-- Single card -->
  {% with messages=get_flashed_messages(with_categories=true) %}
    {% if messages %}
      {% for category, message in messages %}
        <div class="card flex items-center justify-between p-4 {{ category }}" id="alertCard">
          <div class="flex items-center">
            <!-- Dynamic Font Awesome icon will be appended here -->
            <p class="text-sm md:text-base whitespace-nowrap overflow-hidden overflow-ellipsis" id="messageText">{{ message }}</p>
          </div>
          <span class="close-btn">&times;</span>
        </div>
        <script>
          // Function to append Font Awesome icon based on class
          function appendFontAwesomeIcon(cardClass) {
            const messageContainer = document.getElementById("messageText");
            const icon = document.createElement("i");
            if (cardClass === "error") {
              icon.className = "fas fa-exclamation-circle text-red-500 mr-2"; // Error icon
            } else if (cardClass === "success") {
              icon.className = "fas fa-check-circle text-green-500 mr-2"; // Success icon
            }
            messageContainer.insertBefore(icon, messageContainer.firstChild); // Insert icon before message
          }

          // Close the card when clicking the close button
          const closeBtn = document.querySelector(".close-btn");
          closeBtn.addEventListener("click", function () {
            document.getElementById("alertCard").style.display = "none";
          });

          // Append Font Awesome icon based on category
          appendFontAwesomeIcon("{{ category }}");
        </script>
      {% endfor %}
    {% endif %}
  {% endwith %}
</body>
</html>
